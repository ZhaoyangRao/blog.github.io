<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mongodb | RaoCy</title>
    <meta name="description" content="欢迎来到RaoCy博客">
    <link rel="icon" href="/blog.github.io/images/logo.png">
    
    <link rel="preload" href="/blog.github.io/assets/css/0.styles.59e117d8.css" as="style"><link rel="preload" href="/blog.github.io/assets/js/app.40307b7f.js" as="script"><link rel="preload" href="/blog.github.io/assets/js/2.d96bbe1c.js" as="script"><link rel="preload" href="/blog.github.io/assets/js/12.f14584a6.js" as="script"><link rel="prefetch" href="/blog.github.io/assets/js/10.e27407ec.js"><link rel="prefetch" href="/blog.github.io/assets/js/11.1108df0c.js"><link rel="prefetch" href="/blog.github.io/assets/js/13.51eb2e60.js"><link rel="prefetch" href="/blog.github.io/assets/js/14.75cab687.js"><link rel="prefetch" href="/blog.github.io/assets/js/15.ba6958d8.js"><link rel="prefetch" href="/blog.github.io/assets/js/16.9def0f33.js"><link rel="prefetch" href="/blog.github.io/assets/js/17.e94b52ea.js"><link rel="prefetch" href="/blog.github.io/assets/js/18.1d038ea1.js"><link rel="prefetch" href="/blog.github.io/assets/js/19.d5406764.js"><link rel="prefetch" href="/blog.github.io/assets/js/20.0c9f75d1.js"><link rel="prefetch" href="/blog.github.io/assets/js/21.9c44734c.js"><link rel="prefetch" href="/blog.github.io/assets/js/22.a1c915fd.js"><link rel="prefetch" href="/blog.github.io/assets/js/23.598f96bf.js"><link rel="prefetch" href="/blog.github.io/assets/js/24.4898e265.js"><link rel="prefetch" href="/blog.github.io/assets/js/25.26cc4164.js"><link rel="prefetch" href="/blog.github.io/assets/js/26.851b5f3c.js"><link rel="prefetch" href="/blog.github.io/assets/js/27.8dc5f327.js"><link rel="prefetch" href="/blog.github.io/assets/js/28.a54b3269.js"><link rel="prefetch" href="/blog.github.io/assets/js/29.abe47e65.js"><link rel="prefetch" href="/blog.github.io/assets/js/3.64658fce.js"><link rel="prefetch" href="/blog.github.io/assets/js/30.f52153f0.js"><link rel="prefetch" href="/blog.github.io/assets/js/31.b0a0510a.js"><link rel="prefetch" href="/blog.github.io/assets/js/32.446fa892.js"><link rel="prefetch" href="/blog.github.io/assets/js/33.70b05627.js"><link rel="prefetch" href="/blog.github.io/assets/js/4.c18a8845.js"><link rel="prefetch" href="/blog.github.io/assets/js/5.97b83420.js"><link rel="prefetch" href="/blog.github.io/assets/js/6.ed1a41d3.js"><link rel="prefetch" href="/blog.github.io/assets/js/7.7968195b.js"><link rel="prefetch" href="/blog.github.io/assets/js/8.02049a1e.js"><link rel="prefetch" href="/blog.github.io/assets/js/9.8d941aac.js">
    <link rel="stylesheet" href="/blog.github.io/assets/css/0.styles.59e117d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog.github.io/" class="home-link router-link-active"><!----> <span class="site-name">RaoCy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器的世界" class="dropdown-title"><span class="title">浏览器的世界</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserKey/" class="nav-link">浏览器内核</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browser/" class="nav-link">浏览器多线程多进程</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserOpen/" class="nav-link">浏览器同域名请求并发限制</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserDns/" class="nav-link">浏览器DNS域名解析</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/broeweSafe/" class="nav-link">浏览器的安全</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserCache/" class="nav-link">浏览器的缓存</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端杂谈" class="dropdown-title"><span class="title">前端杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/modules/" class="nav-link">前端开发模式</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/utils/" class="nav-link">常用工具函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/edit/" class="nav-link">前端常用开发工具</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/jsnull/" class="nav-link">null与undefined</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/eventLoop/" class="nav-link">宏任务和微任务</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/callback/" class="nav-link">js异步编程方案</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iterable/" class="nav-link">iterator迭代器</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/closure/" class="nav-link">闭包</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/funcHigh/" class="nav-link">高阶函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/this/" class="nav-link">js中的this</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/class/" class="nav-link">js中的面向对象</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/diff/" class="nav-link">diff算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术杂玩" class="dropdown-title"><span class="title">前端技术杂玩</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/react/index/" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/api/" class="nav-link">mongodb</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/vuecli/index/" class="nav-link">vuecli</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mxgraph/index/" class="nav-link">mxgraph</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/prerender-spa-plugin/index/" class="nav-link">prerender-spa-plugin</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器的世界" class="dropdown-title"><span class="title">浏览器的世界</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserKey/" class="nav-link">浏览器内核</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browser/" class="nav-link">浏览器多线程多进程</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserOpen/" class="nav-link">浏览器同域名请求并发限制</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserDns/" class="nav-link">浏览器DNS域名解析</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/broeweSafe/" class="nav-link">浏览器的安全</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserCache/" class="nav-link">浏览器的缓存</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端杂谈" class="dropdown-title"><span class="title">前端杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/modules/" class="nav-link">前端开发模式</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/utils/" class="nav-link">常用工具函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/edit/" class="nav-link">前端常用开发工具</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/jsnull/" class="nav-link">null与undefined</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/eventLoop/" class="nav-link">宏任务和微任务</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/callback/" class="nav-link">js异步编程方案</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iterable/" class="nav-link">iterator迭代器</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/closure/" class="nav-link">闭包</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/funcHigh/" class="nav-link">高阶函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/this/" class="nav-link">js中的this</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/class/" class="nav-link">js中的面向对象</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/diff/" class="nav-link">diff算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术杂玩" class="dropdown-title"><span class="title">前端技术杂玩</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/react/index/" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/api/" class="nav-link">mongodb</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/vuecli/index/" class="nav-link">vuecli</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mxgraph/index/" class="nav-link">mxgraph</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/prerender-spa-plugin/index/" class="nav-link">prerender-spa-plugin</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>mongodb</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog.github.io/mongodb/api.html#mongodb安装" class="sidebar-link">mongodb安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/api.html#_1-下载" class="sidebar-link">1.下载</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/api.html#_2-安装" class="sidebar-link">2.安装</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/api.html#_3-配置，创建数据目录" class="sidebar-link">3.配置，创建数据目录</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/api.html#_4-命令行下运行-mongodb-服务器" class="sidebar-link">4.命令行下运行 MongoDB 服务器</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/api.html#_5-通过windows服务配置mongodb服务" class="sidebar-link">5.通过windows服务配置mongoDB服务</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/api.html#mongodb后台管理-shell" class="sidebar-link">MongoDB后台管理 Shell</a></li></ul></li><li><a href="/blog.github.io/mongodb/api.html#mongodb基本操作" class="sidebar-link">mongodb基本操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/api.html#数据库相关的基本操作" class="sidebar-link">数据库相关的基本操作</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/api.html#集合的基本操作" class="sidebar-link">集合的基本操作</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/api.html#数据的基本操作" class="sidebar-link">数据的基本操作</a></li></ul></li><li><a href="/blog.github.io/mongodb/api.html#mongodb小例子" class="sidebar-link">mongodb小例子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/api.html#后端代码的结构" class="sidebar-link">后端代码的结构</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/api.html#主要目录概述" class="sidebar-link">主要目录概述</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mongodb"><a href="#mongodb" class="header-anchor">#</a> mongodb</h1> <h2 id="mongodb安装"><a href="#mongodb安装" class="header-anchor">#</a> mongodb安装</h2> <p>关于什么是mongoDB啊？之类的这里就不扯了，百度啊很多人的博客都有讲，我这里就直接开始安装使用吧</p> <h3 id="_1-下载"><a href="#_1-下载" class="header-anchor">#</a> 1.下载</h3> <div class="language- extra-class"><pre class="language-text"><code>去官网下载适合自己的稳定版本,官网百度哈
</code></pre></div><h3 id="_2-安装"><a href="#_2-安装" class="header-anchor">#</a> 2.安装</h3> <div class="language- extra-class"><pre class="language-text"><code>安装，我这里选择的是自定义安装路径，c:\mongodb，然后点击Next直到安装结束
</code></pre></div><h3 id="_3-配置，创建数据目录"><a href="#_3-配置，创建数据目录" class="header-anchor">#</a> 3.配置，创建数据目录</h3> <p>MongoDB将数据目录存储在 data\db 目录下。但是这个数据目录不会主动创建，我们在安装完成后需要创建它。请注意，数据目录应该放在根目录下（(如： C:\ 或者 D:\ 等 )。</p> <p><img src="https://user-gold-cdn.xitu.io/2019/4/28/16a62e3aac7a03c5?w=833&amp;h=212&amp;f=png&amp;s=19324" alt=""></p> <h3 id="_4-命令行下运行-mongodb-服务器"><a href="#_4-命令行下运行-mongodb-服务器" class="header-anchor">#</a> 4.命令行下运行 MongoDB 服务器</h3> <div class="language- extra-class"><pre class="language-text"><code>运行MongoDB服务器,就是进入你的安装bin目录输入mongod.exe了
</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2019/4/28/16a62e61a54c2898?w=673&amp;h=166&amp;f=png&amp;s=13446" alt=""></p> <div class="language- extra-class"><pre class="language-text"><code>在 mongod.exe 设置 dbpath 路径来指定 \data\db 的替换路径。如下图
</code></pre></div><p>成功接下来就会看到会输出如下信息
<img src="https://user-gold-cdn.xitu.io/2019/4/28/16a62e7bcd8a064b?w=673&amp;h=420&amp;f=png&amp;s=43435" alt="">
到这里通过命令行的方式启动 MongoDB 已经完成了，具体请看下面关于MongoDB后台管理 Shell的使用方式</p> <h3 id="_5-通过windows服务配置mongodb服务"><a href="#_5-通过windows服务配置mongodb服务" class="header-anchor">#</a> 5.通过windows服务配置mongoDB服务</h3> <p>当然你觉得命令行不舒服，也可以通过配置windows服务配置mongoDB服务</p> <h4 id="第一步都是在根目录下创建data-db-data-log"><a href="#第一步都是在根目录下创建data-db-data-log" class="header-anchor">#</a> 第一步都是在根目录下创建data\db   data\log</h4> <p>mkdir c:\data\db
mkdir c:\data\log</p> <h4 id="第二部，创建一个配置文件"><a href="#第二部，创建一个配置文件" class="header-anchor">#</a> 第二部，创建一个配置文件</h4> <p>创建一个配置文件位于你安装的mongodb C:\mongodb\mongod.cfg 其中指定 systemLog.path
和 storage.dbPath
内容mongod.cfg的内容如下
systemLog:
destination: file
path: c:\data\log\mongod.log
storage:
dbPath: c:\data\db</p> <h4 id="第三步，配置环境变量"><a href="#第三步，配置环境变量" class="header-anchor">#</a> 第三步，配置环境变量</h4> <p>电脑高级系统设置，系统变量PATH(或者path)新增→加入c:\MongoDB\bin。</p> <h4 id="第四步安装-mongodb服务"><a href="#第四步安装-mongodb服务" class="header-anchor">#</a> 第四步安装 MongoDB服务</h4> <p>通过执行mongod.exe，使用--install选项来安装服务，使用--config选项来指定之前创建的配置文件
进入安装文件bin目录执行 mongod --config c:\MongoDB\mongod.cfg&quot; --install --serviceName &quot;MongoDB&quot;
net start MongoDB开启
net stop MongoDB停止
C:\mongodb\bin\mongod.exe --remove移除</p> <p><img src="https://user-gold-cdn.xitu.io/2019/4/28/16a6319c492f6919?w=808&amp;h=546&amp;f=png&amp;s=34728" alt=""></p> <h4 id="到这里通过windows服务配置mongodb服务已经基本完成了，接下来你使用mongodb只需要打开cmd输入mongo就行了"><a href="#到这里通过windows服务配置mongodb服务已经基本完成了，接下来你使用mongodb只需要打开cmd输入mongo就行了" class="header-anchor">#</a> 到这里通过windows服务配置mongoDB服务已经基本完成了，接下来你使用mongodb只需要打开cmd输入mongo就行了</h4> <p><img src="https://user-gold-cdn.xitu.io/2019/4/28/16a632332feabd35?w=1051&amp;h=598&amp;f=png&amp;s=95744" alt=""></p> <h3 id="mongodb后台管理-shell"><a href="#mongodb后台管理-shell" class="header-anchor">#</a> MongoDB后台管理 Shell</h3> <p>这里是通过命令行的方式启动的 MongoDB ，打开mongodb安装目录下的bin目录，然后执行mongo.exe文件，MongoDB Shell是MongoDB自带的交互式Javascript shell，用来对MongoDB进行操作和管理的交互式环境。
由于它是一个JavaScript shell，您可以运行一些简单的算术运算:</p> <p><img src="https://user-gold-cdn.xitu.io/2019/4/28/16a62eda1f767951?w=665&amp;h=315&amp;f=png&amp;s=25658" alt="">
db 命令用于查看当前操作的文档（数据库）：</p> <p><img src="https://user-gold-cdn.xitu.io/2019/4/28/16a62eded5e4fc88?w=681&amp;h=323&amp;f=png&amp;s=26861" alt=""></p> <p>安装大致就这些了，接下来就是一些数据库增删改查的那些基本操作了</p> <h2 id="mongodb基本操作"><a href="#mongodb基本操作" class="header-anchor">#</a> mongodb基本操作</h2> <p>这两天总算清闲下来了，这里只介绍mongodb的一些基本增删改查，从大到小，从数据库到下面的集合表等，这里推荐一个mongodb的可视化工具Robo3T,在上面操作增删改查使用起来也简单</p> <h3 id="数据库相关的基本操作"><a href="#数据库相关的基本操作" class="header-anchor">#</a> 数据库相关的基本操作</h3> <h4 id="查看当前用的数据库"><a href="#查看当前用的数据库" class="header-anchor">#</a> 查看当前用的数据库</h4> <p>show dbs</p> <h4 id="新增使用数据库"><a href="#新增使用数据库" class="header-anchor">#</a> 新增使用数据库</h4> <p>user XXX (没有此数据库会新建一个)</p> <h4 id="删除数据库"><a href="#删除数据库" class="header-anchor">#</a> 删除数据库</h4> <p>db.dropDatabase()</p> <h4 id="查看当前有的数据库（多个或者单个）"><a href="#查看当前有的数据库（多个或者单个）" class="header-anchor">#</a> 查看当前有的数据库（多个或者单个）</h4> <p>db</p> <h3 id="集合的基本操作"><a href="#集合的基本操作" class="header-anchor">#</a> 集合的基本操作</h3> <h4 id="查看集合"><a href="#查看集合" class="header-anchor">#</a> 查看集合</h4> <p>show collections</p> <h4 id="创建集合"><a href="#创建集合" class="header-anchor">#</a> 创建集合</h4> <p>create collection</p> <h4 id="删除集合"><a href="#删除集合" class="header-anchor">#</a> 删除集合</h4> <p>drop collection</p> <h4 id="给集合改名字"><a href="#给集合改名字" class="header-anchor">#</a> 给集合改名字</h4> <p>rename collection</p> <h3 id="数据的基本操作"><a href="#数据的基本操作" class="header-anchor">#</a> 数据的基本操作</h3> <h4 id="创建插入数据"><a href="#创建插入数据" class="header-anchor">#</a> 创建插入数据</h4> <div class="language- extra-class"><pre class="language-text"><code>db.student.insert({&quot;name&quot;:&quot;张三&quot;,&quot;age&quot;:&quot;22&quot;,&quot;sex&quot;:&quot;男&quot;});#如果数据库中不存在集合，就创建并插入这些数据&lt;br&gt;
db.student.insert({&quot;name&quot;:&quot;李四&quot;,&quot;age&quot;:&quot;22&quot;,&quot;sex&quot;:&quot;女&quot;,&quot;phone&quot;:&quot;18513081650&quot;,&quot;class&quot;:&quot;计算机1班&quot;});#里面的key-value不用保持一致&lt;br&gt;
db.student.insert([{&quot;name&quot;:&quot;王五&quot;,&quot;age&quot;:&quot;22&quot;,&quot;sex&quot;:&quot;男&quot;,&quot;class&quot;:&quot;计算机2班&quot;},{&quot;name&quot;:&quot;赵六&quot;,&quot;age&quot;:&quot;22&quot;,&quot;sex&quot;:&quot;女&quot;,&quot;phone&quot;:&quot;18513081650&quot;,&quot;class&quot;:&quot;计算机1班&quot;}]);#同时插入多条数据&lt;br&gt;
</code></pre></div><h4 id="更新"><a href="#更新" class="header-anchor">#</a> 更新</h4> <div class="language- extra-class"><pre class="language-text"><code>db.student.update({&quot;name&quot;:&quot;张三&quot;},{&quot;name&quot;:&quot;张三丰&quot;});#如果有多条语句，只修改第一条，会覆盖原有数据
db.student.update({&quot;22&quot;:&quot;女&quot;},{&quot;name&quot;:&quot;张三丰&quot;});
db.student.update({&quot;name&quot;:&quot;王五&quot;},{$set:{&quot;name&quot;:&quot;张无忌&quot;}},{multi:true});#把所有的记录都改了
db.student.update({&quot;name&quot;:&quot;张三&quot;},{$set:{&quot;name&quot;:&quot;张无忌&quot;}});只想改某个key的value使用set 
</code></pre></div><h4 id="查询"><a href="#查询" class="header-anchor">#</a> 查询</h4> <div class="language- extra-class"><pre class="language-text"><code>db.student.find();#查询全部
db.student.find({&quot;name&quot;:&quot;李四&quot;});#查询指定记录，返回这一行结果
db.student.update({&quot;name&quot;:&quot;张三丰&quot;},{&quot;name&quot;:&quot;张无忌&quot;,&quot;age&quot;:&quot;28&quot;,&quot;sex&quot;:&quot;男&quot;});
db.student.find({&quot;name&quot;:&quot;张无忌&quot;,&quot;age&quot;:&quot;28&quot;});#and操作
db.student.find({$or:[{&quot;name&quot;:&quot;张无忌&quot;},{&quot;name&quot;:&quot;李四&quot;}]});#or操作
db.student.find().pretty();#格式化显示
db.student.find().count();#获取结果的行数
db.student.find().sort({&quot;age&quot;:-1});#按照sort里面key的值排序，1为正序，-1为倒序
</code></pre></div><h4 id="删除"><a href="#删除" class="header-anchor">#</a> 删除</h4> <div class="language- extra-class"><pre class="language-text"><code>db.student.remove();#删除所有数据
db.student.remove({&quot;22&quot;:&quot;女&quot;});#按照条件删除
db.student.remove({&quot;name&quot;:&quot;张无忌&quot;},2);#删除几条
</code></pre></div><h2 id="mongodb小例子"><a href="#mongodb小例子" class="header-anchor">#</a> mongodb小例子</h2> <p>koa（后端）+mongodb（数据库）+vue前端界面实现得增删改查小demo
昨天闲下来翻了一下koa的api做了一个增删改查小表格demo，四个接口加前端小界面，大概加查看api用了半天时间。所以koa确实是一个简单快速开发的库
看这个你应该已经学会了操作一种数据库，我这里用的是mongodb，对mongodb不会的可以去看看我的前两篇文章，上手很简单，我这里用的是可视化工具robo3.0</p> <p><img src="https://user-gold-cdn.xitu.io/2019/5/15/16ab928a0aadf5b6?w=1723&amp;h=720&amp;f=png&amp;s=72499" alt=""></p> <p>由于前端很简单我就放在了public下面，项目地址 https://github.com/ZhaoyangRao/koa.git</p> <div class="custom-block tip"><p class="custom-block-title">效果图</p> <p>先看看实现后的效果图吧</p></div> <p><img src="https://user-gold-cdn.xitu.io/2019/5/15/16ab94944c3f5117?w=860&amp;h=356&amp;f=png&amp;s=27768" alt="">
很简单的一个表格的增删改查</p> <h3 id="后端代码的结构"><a href="#后端代码的结构" class="header-anchor">#</a> 后端代码的结构</h3> <div class="language- extra-class"><pre class="language-text"><code>├── app     
│   └── controllers // 控制器文件目录，用来操作数据库
│   │   └──  ...  // 对应操作的表，这里就省略了
│   ├── middleware// 自定义中间件目录
│   ├── models    // 定义的表结构
│   │   └──  ...  // 对应的表，这里就省略了
│   └── utils     // 工具模块目录
│   │   └──  ...  // 工具模块，这里就省略了
├── routes         // 路由文件
│   ├── api    // 路由配置     
├── app.js        // 项目入口文件
└── config.js     // 配置文件
</code></pre></div><p>这里说一个题外话，其实现在前端后端有一个贯穿编码整个的思想就是MVC，这里的目录和作用也体现了MVC，models就是M,controllers就是C，routes就类似于V表现层也就是抛出来的请求接口。</p> <h3 id="主要目录概述"><a href="#主要目录概述" class="header-anchor">#</a> 主要目录概述</h3> <h4 id="appjs入口文件"><a href="#appjs入口文件" class="header-anchor">#</a> appjs入口文件</h4> <p>入口文件没有业务代码，做了几件重要的事情，</p> <div class="language- extra-class"><pre class="language-text"><code>1.require('koa')
2.连接了数据库（需要用到mongoose mongoose是nodeJS提供连接 mongodb的一个库）
3.引入调用了routes
4.require('koa2-cors');require('koa-body');
我这里还引入两个用的比较多的生态库，一个用来解决跨域，一个用来解决post请求以及文件下载等
</code></pre></div><h4 id="连接数据库相关目录"><a href="#连接数据库相关目录" class="header-anchor">#</a> 连接数据库相关目录</h4> <p>首先数据库属于M层，你可以看见models里面就是mongoose连接 mongodb的，</p> <div class="language- extra-class"><pre class="language-text"><code>mongoose.Schema( 相当于一个数据库的模板，数据结构)
mongoose.model（简单的理解就是通过mongoose.model你就可以对数据库里面的相应的数据进行操作（））
</code></pre></div><h4 id="controllers目录"><a href="#controllers目录" class="header-anchor">#</a> controllers目录</h4> <p>也就是自己定义的那些操作调用数据层的那些方法控制器</p> <h4 id="utils工具"><a href="#utils工具" class="header-anchor">#</a> utils工具</h4> <p>一些常用的方法，格式化时间等</p> <h4 id="middleware自定义中间件"><a href="#middleware自定义中间件" class="header-anchor">#</a> middleware自定义中间件</h4> <p>你可以写一些对request response封装一下</p> <h4 id="routes（接口）"><a href="#routes（接口）" class="header-anchor">#</a> routes（接口）</h4> <p>暴露出去的接口，以及相应接口调用的回调controllers,controllers再去操作models</p> <div class="custom-block tip"><p class="custom-block-title">效果图</p> <p>总结，这只是我自己定义的目录，以及自己的片面理解，具体代码注释在文件里面，毕竟只看了写了半天，有不对的地方欢迎指正</p></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog.github.io/assets/js/app.40307b7f.js" defer></script><script src="/blog.github.io/assets/js/2.d96bbe1c.js" defer></script><script src="/blog.github.io/assets/js/12.f14584a6.js" defer></script>
  </body>
</html>
