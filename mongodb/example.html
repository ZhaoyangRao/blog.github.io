<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mongodb小例子 | RaoCy blog</title>
    <meta name="description" content="我的博客网站">
    <link rel="icon" href="/blog.github.io/logo.jpg">
    
    <link rel="preload" href="/blog.github.io/assets/css/0.styles.ff69c3e5.css" as="style"><link rel="preload" href="/blog.github.io/assets/js/app.eabe6f8c.js" as="script"><link rel="preload" href="/blog.github.io/assets/js/2.c869209e.js" as="script"><link rel="preload" href="/blog.github.io/assets/js/12.33da4b6f.js" as="script"><link rel="prefetch" href="/blog.github.io/assets/js/10.6f2a6fbb.js"><link rel="prefetch" href="/blog.github.io/assets/js/11.48a282a1.js"><link rel="prefetch" href="/blog.github.io/assets/js/13.f7609e3a.js"><link rel="prefetch" href="/blog.github.io/assets/js/14.90348d63.js"><link rel="prefetch" href="/blog.github.io/assets/js/3.a646a80e.js"><link rel="prefetch" href="/blog.github.io/assets/js/4.7fde932d.js"><link rel="prefetch" href="/blog.github.io/assets/js/5.e95f0b13.js"><link rel="prefetch" href="/blog.github.io/assets/js/6.0a1c1983.js"><link rel="prefetch" href="/blog.github.io/assets/js/7.6177528f.js"><link rel="prefetch" href="/blog.github.io/assets/js/8.2405960e.js"><link rel="prefetch" href="/blog.github.io/assets/js/9.550f0b74.js">
    <link rel="stylesheet" href="/blog.github.io/assets/css/0.styles.ff69c3e5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog.github.io/" class="home-link router-link-active"><!----> <span class="site-name">RaoCy blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog.github.io/fontbase/" class="nav-link">前端基础</a></div><div class="nav-item"><a href="/blog.github.io/fontup/index/" class="nav-link">前端进阶</a></div><div class="nav-item"><a href="/blog.github.io/edit/" class="nav-link">前端开发编辑器</a></div><div class="nav-item"><a href="/blog.github.io/utils/" class="nav-link">前端常用工具函数</a></div><div class="nav-item"><a href="/blog.github.io/modules/" class="nav-link">前端开发模式</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">mongodb</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/base/" class="nav-link">mongodb安装</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/api/" class="nav-link">mongodb基础</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/example/" class="nav-link">mongodb实战例子</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog.github.io/fontbase/" class="nav-link">前端基础</a></div><div class="nav-item"><a href="/blog.github.io/fontup/index/" class="nav-link">前端进阶</a></div><div class="nav-item"><a href="/blog.github.io/edit/" class="nav-link">前端开发编辑器</a></div><div class="nav-item"><a href="/blog.github.io/utils/" class="nav-link">前端常用工具函数</a></div><div class="nav-item"><a href="/blog.github.io/modules/" class="nav-link">前端开发模式</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">mongodb</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/base/" class="nav-link">mongodb安装</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/api/" class="nav-link">mongodb基础</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/example/" class="nav-link">mongodb实战例子</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>mongodb小例子</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog.github.io/mongodb/example.html#mongodb小例子" class="sidebar-link">mongodb小例子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/example.html#后端代码的结构" class="sidebar-link">后端代码的结构</a></li></ul></li><li><a href="/blog.github.io/mongodb/example.html#主要目录概述" class="sidebar-link">主要目录概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/example.html#appjs入口文件" class="sidebar-link">appjs入口文件</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/example.html#连接数据库相关目录" class="sidebar-link">连接数据库相关目录</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/example.html#controllers目录" class="sidebar-link">controllers目录</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/example.html#utils工具" class="sidebar-link">utils工具</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/example.html#middleware自定义中间件" class="sidebar-link">middleware自定义中间件</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/mongodb/example.html#routes（接口）" class="sidebar-link">routes（接口）</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="mongodb小例子"><a href="#mongodb小例子" aria-hidden="true" class="header-anchor">#</a> mongodb小例子</h2> <p>koa（后端）+mongodb（数据库）+vue前端界面实现得增删改查小demo
昨天闲下来翻了一下koa的api做了一个增删改查小表格demo，四个接口加前端小界面，大概加查看api用了半天时间。所以koa确实是一个简单快速开发的库
看这个你应该已经学会了操作一种数据库，我这里用的是mongodb，对mongodb不会的可以去看看我的前两篇文章，上手很简单，我这里用的是可视化工具robo3.0</p> <p><img src="https://user-gold-cdn.xitu.io/2019/5/15/16ab928a0aadf5b6?w=1723&amp;h=720&amp;f=png&amp;s=72499" alt=""></p> <p>由于前端很简单我就放在了public下面，项目地址 https://github.com/ZhaoyangRao/koa.git</p> <div class="tip custom-block"><p class="custom-block-title">效果图</p> <p>先看看实现后的效果图吧</p></div> <p><img src="https://user-gold-cdn.xitu.io/2019/5/15/16ab94944c3f5117?w=860&amp;h=356&amp;f=png&amp;s=27768" alt="">
很简单的一个表格的增删改查</p> <h3 id="后端代码的结构"><a href="#后端代码的结构" aria-hidden="true" class="header-anchor">#</a> 后端代码的结构</h3> <div class="language- extra-class"><pre class="language-text"><code>├── app     
│   └── controllers // 控制器文件目录，用来操作数据库
│   │   └──  ...  // 对应操作的表，这里就省略了
│   ├── middleware// 自定义中间件目录
│   ├── models    // 定义的表结构
│   │   └──  ...  // 对应的表，这里就省略了
│   └── utils     // 工具模块目录
│   │   └──  ...  // 工具模块，这里就省略了
├── routes         // 路由文件
│   ├── api    // 路由配置     
├── app.js        // 项目入口文件
└── config.js     // 配置文件
</code></pre></div><p>这里说一个题外话，其实现在前端后端有一个贯穿编码整个的思想就是MVC，这里的目录和作用也体现了MVC，models就是M,controllers就是C，routes就类似于V表现层也就是抛出来的请求接口。</p> <h2 id="主要目录概述"><a href="#主要目录概述" aria-hidden="true" class="header-anchor">#</a> 主要目录概述</h2> <h3 id="appjs入口文件"><a href="#appjs入口文件" aria-hidden="true" class="header-anchor">#</a> appjs入口文件</h3> <p>入口文件没有业务代码，做了几件重要的事情，</p> <div class="language- extra-class"><pre class="language-text"><code>1.require('koa')
2.连接了数据库（需要用到mongoose mongoose是nodeJS提供连接 mongodb的一个库）
3.引入调用了routes
4.require('koa2-cors');require('koa-body');
我这里还引入两个用的比较多的生态库，一个用来解决跨域，一个用来解决post请求以及文件下载等
</code></pre></div><h3 id="连接数据库相关目录"><a href="#连接数据库相关目录" aria-hidden="true" class="header-anchor">#</a> 连接数据库相关目录</h3> <p>首先数据库属于M层，你可以看见models里面就是mongoose连接 mongodb的，</p> <div class="language- extra-class"><pre class="language-text"><code>mongoose.Schema( 相当于一个数据库的模板，数据结构)
mongoose.model（简单的理解就是通过mongoose.model你就可以对数据库里面的相应的数据进行操作（））
</code></pre></div><h3 id="controllers目录"><a href="#controllers目录" aria-hidden="true" class="header-anchor">#</a> controllers目录</h3> <p>也就是自己定义的那些操作调用数据层的那些方法控制器</p> <h3 id="utils工具"><a href="#utils工具" aria-hidden="true" class="header-anchor">#</a> utils工具</h3> <p>一些常用的方法，格式化时间等</p> <h3 id="middleware自定义中间件"><a href="#middleware自定义中间件" aria-hidden="true" class="header-anchor">#</a> middleware自定义中间件</h3> <p>你可以写一些对request response封装一下</p> <h3 id="routes（接口）"><a href="#routes（接口）" aria-hidden="true" class="header-anchor">#</a> routes（接口）</h3> <p>暴露出去的接口，以及相应接口调用的回调controllers,controllers再去操作models</p> <div class="tip custom-block"><p class="custom-block-title">效果图</p> <p>总结，这只是我自己定义的目录，以及自己的片面理解，具体代码注释在文件里面，毕竟只看了写了半天，有不对的地方欢迎指正</p></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog.github.io/assets/js/app.eabe6f8c.js" defer></script><script src="/blog.github.io/assets/js/2.c869209e.js" defer></script><script src="/blog.github.io/assets/js/12.33da4b6f.js" defer></script>
  </body>
</html>
