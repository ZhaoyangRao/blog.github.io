<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>http | RaoCy</title>
    <meta name="description" content="欢迎来到RaoCy博客">
    <link rel="icon" href="/blog.github.io/images/logo.png">
    
    <link rel="preload" href="/blog.github.io/assets/css/0.styles.59e117d8.css" as="style"><link rel="preload" href="/blog.github.io/assets/js/app.dc1ffa30.js" as="script"><link rel="preload" href="/blog.github.io/assets/js/2.08fb6a77.js" as="script"><link rel="preload" href="/blog.github.io/assets/js/28.da0ec7e2.js" as="script"><link rel="prefetch" href="/blog.github.io/assets/js/10.d18d338d.js"><link rel="prefetch" href="/blog.github.io/assets/js/11.d50606ca.js"><link rel="prefetch" href="/blog.github.io/assets/js/12.2d5e909c.js"><link rel="prefetch" href="/blog.github.io/assets/js/13.c2786e32.js"><link rel="prefetch" href="/blog.github.io/assets/js/14.612e31b7.js"><link rel="prefetch" href="/blog.github.io/assets/js/15.1404e72c.js"><link rel="prefetch" href="/blog.github.io/assets/js/16.a43ef10a.js"><link rel="prefetch" href="/blog.github.io/assets/js/17.08b58e92.js"><link rel="prefetch" href="/blog.github.io/assets/js/18.3ba9d6c7.js"><link rel="prefetch" href="/blog.github.io/assets/js/19.fda9f2c7.js"><link rel="prefetch" href="/blog.github.io/assets/js/20.ad933aca.js"><link rel="prefetch" href="/blog.github.io/assets/js/21.a2a97297.js"><link rel="prefetch" href="/blog.github.io/assets/js/22.0ba40a2d.js"><link rel="prefetch" href="/blog.github.io/assets/js/23.a7ba6e9a.js"><link rel="prefetch" href="/blog.github.io/assets/js/24.22977506.js"><link rel="prefetch" href="/blog.github.io/assets/js/25.aa05b64e.js"><link rel="prefetch" href="/blog.github.io/assets/js/26.0cdf6387.js"><link rel="prefetch" href="/blog.github.io/assets/js/27.e3789d62.js"><link rel="prefetch" href="/blog.github.io/assets/js/29.717e0ca2.js"><link rel="prefetch" href="/blog.github.io/assets/js/3.5045f36e.js"><link rel="prefetch" href="/blog.github.io/assets/js/30.5e7c3a60.js"><link rel="prefetch" href="/blog.github.io/assets/js/31.c8d23bf4.js"><link rel="prefetch" href="/blog.github.io/assets/js/32.f285ff61.js"><link rel="prefetch" href="/blog.github.io/assets/js/33.1a5237f4.js"><link rel="prefetch" href="/blog.github.io/assets/js/34.c81e4cdd.js"><link rel="prefetch" href="/blog.github.io/assets/js/35.87c86838.js"><link rel="prefetch" href="/blog.github.io/assets/js/36.7d5d299d.js"><link rel="prefetch" href="/blog.github.io/assets/js/37.5fb182ba.js"><link rel="prefetch" href="/blog.github.io/assets/js/38.035109da.js"><link rel="prefetch" href="/blog.github.io/assets/js/39.5de03b27.js"><link rel="prefetch" href="/blog.github.io/assets/js/4.0d132650.js"><link rel="prefetch" href="/blog.github.io/assets/js/5.3daba24f.js"><link rel="prefetch" href="/blog.github.io/assets/js/6.7f139b78.js"><link rel="prefetch" href="/blog.github.io/assets/js/7.a1080829.js"><link rel="prefetch" href="/blog.github.io/assets/js/8.3f1e94ff.js"><link rel="prefetch" href="/blog.github.io/assets/js/9.6691e078.js">
    <link rel="stylesheet" href="/blog.github.io/assets/css/0.styles.59e117d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog.github.io/" class="home-link router-link-active"><!----> <span class="site-name">RaoCy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器的世界" class="dropdown-title"><span class="title">浏览器的世界</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserKey/" class="nav-link">浏览器内核</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browser/" class="nav-link">浏览器多线程多进程</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserOpen/" class="nav-link">浏览器同域名请求并发限制</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserDns/" class="nav-link">浏览器DNS域名解析</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/broeweSafe/" class="nav-link">浏览器的安全</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserCache/" class="nav-link">浏览器的缓存</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/webworker/" class="nav-link">Web Worker</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iframe/" class="nav-link">iframe</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/http/" class="nav-link">http协议</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/cookie/" class="nav-link">cookie</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端杂谈" class="dropdown-title"><span class="title">前端杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/modules/" class="nav-link">前端开发模式</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/jsnull/" class="nav-link">null与undefined</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/eventLoop/" class="nav-link">宏任务和微任务</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/callback/" class="nav-link">js异步编程方案</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iterable/" class="nav-link">iterator迭代器</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/closure/" class="nav-link">闭包</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/funcHigh/" class="nav-link">高阶函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/this/" class="nav-link">js中的this</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/class/" class="nav-link">js中的面向对象</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/event/" class="nav-link">js里的事件模型</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/diff/" class="nav-link">diff算法</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/module/" class="nav-link">前端模块化规范</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术杂玩" class="dropdown-title"><span class="title">前端技术杂玩</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/react/index/" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/api/" class="nav-link">mongodb</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/vuecli/index/" class="nav-link">vuecli</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mxgraph/index/" class="nav-link">mxgraph</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/prerender-spa-plugin/index/" class="nav-link">prerender-spa-plugin</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器的世界" class="dropdown-title"><span class="title">浏览器的世界</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserKey/" class="nav-link">浏览器内核</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browser/" class="nav-link">浏览器多线程多进程</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserOpen/" class="nav-link">浏览器同域名请求并发限制</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserDns/" class="nav-link">浏览器DNS域名解析</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/broeweSafe/" class="nav-link">浏览器的安全</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserCache/" class="nav-link">浏览器的缓存</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/webworker/" class="nav-link">Web Worker</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iframe/" class="nav-link">iframe</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/http/" class="nav-link">http协议</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/cookie/" class="nav-link">cookie</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端杂谈" class="dropdown-title"><span class="title">前端杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/modules/" class="nav-link">前端开发模式</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/jsnull/" class="nav-link">null与undefined</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/eventLoop/" class="nav-link">宏任务和微任务</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/callback/" class="nav-link">js异步编程方案</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iterable/" class="nav-link">iterator迭代器</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/closure/" class="nav-link">闭包</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/funcHigh/" class="nav-link">高阶函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/this/" class="nav-link">js中的this</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/class/" class="nav-link">js中的面向对象</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/event/" class="nav-link">js里的事件模型</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/diff/" class="nav-link">diff算法</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/module/" class="nav-link">前端模块化规范</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术杂玩" class="dropdown-title"><span class="title">前端技术杂玩</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/react/index/" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/api/" class="nav-link">mongodb</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/vuecli/index/" class="nav-link">vuecli</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mxgraph/index/" class="nav-link">mxgraph</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/prerender-spa-plugin/index/" class="nav-link">prerender-spa-plugin</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>http</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog.github.io/study/http.html#http" class="sidebar-link">http</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog.github.io/study/http.html#http0-9" class="sidebar-link">http0.9</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/study/http.html#http1-0" class="sidebar-link">http1.0</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/study/http.html#http1-1" class="sidebar-link">http1.1</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/study/http.html#spdy协议" class="sidebar-link">SPDY协议</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/study/http.html#websocket" class="sidebar-link">WebSocket</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/study/http.html#http2" class="sidebar-link">http2</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="http"><a href="#http" class="header-anchor">#</a> http</h2> <p>http(超文本传输协议)是基于TCP/IP协议的应用层协议，主要是规定客服端与服务端通信的规则，协议，默认80端口。</p> <h3 id="http0-9"><a href="#http0-9" class="header-anchor">#</a> http0.9</h3> <p>最早的0.9版本，只有一个GET命令，而且协议规定服务端只能返回HTML格式的字符串。</p> <h4 id="客户端请求"><a href="#客户端请求" class="header-anchor">#</a> 客户端请求</h4> <div class="language- extra-class"><pre class="language-text"><code>GET /index.html
</code></pre></div><h4 id="服务端响应"><a href="#服务端响应" class="header-anchor">#</a> 服务端响应</h4> <div class="language- extra-class"><pre class="language-text"><code>&lt;html&gt;
  &lt;body&gt;Hello World&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><h3 id="http1-0"><a href="#http1-0" class="header-anchor">#</a> http1.0</h3> <p>1.0版本的发布极大的丰富了http协议</p> <ul><li>各种格式的内容都可以传输，图片，音频，文字</li> <li>命令GET POST，还有HEAD命令</li> <li>状态码，缓存，权限，内容编码，头信息等等新增的概念</li></ul> <h4 id="客户端请求-2"><a href="#客户端请求-2" class="header-anchor">#</a> 客户端请求</h4> <div class="language- extra-class"><pre class="language-text"><code>GET / HTTP/1.0
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5)
Accept: */*
</code></pre></div><h4 id="服务端响应-2"><a href="#服务端响应-2" class="header-anchor">#</a> 服务端响应</h4> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.0 200 OK 
Content-Type: text/plain
Content-Length: 137582
Expires: Thu, 05 Dec 1997 16:00:00 GMT
Last-Modified: Wed, 5 August 1996 15:55:28 GMT
Server: Apache 0.84

&lt;html&gt;
  &lt;body&gt;Hello World&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><h4 id="content-type"><a href="#content-type" class="header-anchor">#</a> Content-Type</h4> <p>主要是指数据的格式，服务端告诉客户端传给你的数据是什么格式，你可以看见Content-Type字段后面的值</p> <div class="language- extra-class"><pre class="language-text"><code>text/plain
text/html
text/css
image/jpeg
image/png
image/svg+xml
audio/mp4
video/mp4
application/javascript
application/pdf
application/zip
application/atom+xml
</code></pre></div><h4 id="content-encoding"><a href="#content-encoding" class="header-anchor">#</a> Content-Encoding</h4> <p>主要是用来表示数据的压缩的方法</p> <div class="language- extra-class"><pre class="language-text"><code>Content-Encoding: gzip
Content-Encoding: compress
Content-Encoding: deflate

</code></pre></div><p>可以看到http1.0已经能够压缩传输的数据，并且传输数据支持的格式更多，最大的缺点就是每次请求都会新建一个tcp连接，无法复用。</p> <p>于是部分浏览器在请求时，新增了一个非标准的Connection: keep-alive，意思就是告诉服务端不要关闭这个TCP，其他请求可以复用，服务端同时也会回应该字段，但是这个并不是所有的浏览器都会支持，于是诞生了http1.1</p> <h3 id="http1-1"><a href="#http1-1" class="header-anchor">#</a> http1.1</h3> <h4 id="持久连接"><a href="#持久连接" class="header-anchor">#</a> 持久连接</h4> <p>http1.1最大的新增功能亮点就是引入了持久连接，tcp默认不会关闭，请求的时候不设置默认就Connection: keep-alive。</p> <p>客户端服务端经过过一段时间没有活动会自动关闭该tcp连接，或者可以设置Connection: close主动关闭tcp连接</p> <p>当然同域名浏览器的持久连接数量是有限制的，不同的浏览器支持的个数可能不太一样</p> <h4 id="管道机制"><a href="#管道机制" class="header-anchor">#</a> 管道机制</h4> <p>同时http1.1还新增了管道机制的概念，简单的理解,tcp就像一个管道，管道里面可以同时发起多个请求，但是注意的是在同一个tcp连接里面的多个请求，服务器会按照请求的顺序依次返回结果</p> <h4 id="content-length"><a href="#content-length" class="header-anchor">#</a> Content-Length</h4> <p>在http1.0，Content-Length这个字段其实用处可能就是表示这个包的大小，而在1.1里面这个字段还有另外一个重要的作用，我们知道1.1的管道机制，同一个tcp可以发起几个请求，那么到底是怎么区分返回的数据是哪一个请求的呢？这就是Content-Length的作用了，当包的大小与Content-Length相等，那么这个请求的包就结束了，接下来的就是下一个请求的数据了</p> <h4 id="分块传输编码"><a href="#分块传输编码" class="header-anchor">#</a> 分块传输编码</h4> <p>通常情况下http的响应都是整个包发给客户端的,然后通过Content-Length区分每个包，整个包发送的缺陷就是如果这个包很大，服务端构建消息体计算Content-Length就会耗费很多时间，而且如果这个包是动态发送的，没有Content-Length又怎么办？</p> <p>1.1版本可以允许服务端发送给客户端的数据分成多个块发送，这时候就不需要客户端拿Content-Length来区分包了，只需在响应头里面添加Transfer-Encoding: chunked，客户端就知道服务端是分块传输的了。<br></p> <p>那么分成这么多块又通过什么来区分这个包传输完成了呢？<br>
即最后一个块是大小为0以及CRLF组成，不包含任何数据，那么这个包就结束。</p> <h4 id="host"><a href="#host" class="header-anchor">#</a> Host</h4> <p>这个字段的最重要的作用就是，有了这个字段我们就可以把我们的请求发往指定的域名。
这样同一个服务器就可以部署多个不同的域名</p> <p>1.1也是目前很主流的版本，新增了很多功能，但是同时随着互联网的发展，对网页响应交互要求越来越高，数据量也越来越大，虽然1.1允许tcp复用，但是管道机制又会按序返回结果，如果前面一个堵塞，后面的就没法完了，这称为&quot;队头堵塞&quot;，尤其现在对网页首页渲染时间的要求容忍度越来越低</p> <p>1.1版本现在大部分前端的优化都是要么减少请求，要么就同时多开tcp连接，比如www.img1.com www.img2.com等等</p> <h3 id="spdy协议"><a href="#spdy协议" class="header-anchor">#</a> SPDY协议</h3> <p>谷歌针对1.1做的优化，自行发布的SPDY协议，所以兼容性肯定是存在问题的，但是它为http2提供了很多借鉴意义，甚至很多功能其实都很相似。</p> <ul><li>请求优先级
在1.1版本虽然有管道机制的概念，但都是顺序返回的，并没有请求优先级的概念，有了请求优先级，就可以让重要的请求优先处理。</li> <li>服务端推送
在1.1以前都是由客户端推送到服务端，而SPDY协议允许服务端推送到客户端</li> <li>header压缩
1.1以前可以对传输的数据压缩，但并没有对header压缩的概念，随着发展，其实header的内容越来越丰富，自定义的字段也越来越多，比如每次请求都带上cookie.token等，对header的压缩自然能减少包的大小和传输速度</li> <li>加密传输
基于https的加密协议传输，更加安全</li> <li>多路复用
1.1同一条TCP的持久连接数量是有限制的，但SPDY多路复用简单的理解就是同一条TCP可以无限制处理多条http请求</li></ul> <p>SPDY协议最大的缺点就是很多浏览器其实并不支持，服务端也需要改造来支持它</p> <h3 id="websocket"><a href="#websocket" class="header-anchor">#</a> WebSocket</h3> <p>WebSocket协议已经成为一种国际标准，基本所有的主流浏览器都支持，它最大的功能就是实现了服务端与客户端相互通信，最大的应用场景就是聊天室，如果你用传统的http1.1以前的版本，那就只能定时向服务端发起请求</p> <ul><li>依然是建立在tcp协议上</li> <li>发送的数据可以是文本也可以是二进制</li> <li>没有同源的限制</li> <li>协议的标识符是ws，加密则是wss</li></ul> <p>其实前端使用起来也很简单，下面是一个简单的示例</p> <div class="language- extra-class"><pre class="language-text"><code>// 新建 WebSocket 实例
var ws = new WebSocket(&quot;wss://echo.websocket.org&quot;);
//返回实例对象的当前状态
switch (ws.readyState) {
  case WebSocket.CONNECTING:
    // do something
    break;
  case WebSocket.OPEN:
    // do something
    break;
  case WebSocket.CLOSING:
    // do something
    break;
  case WebSocket.CLOSED:
    // do something
    break;
  default:
    // this never happens
    break;
}

//指定连接成功后的回调函数
ws.onopen = function(evt) { 
  console.log(&quot;Connection open ...&quot;); 
  ws.send(&quot;Hello WebSockets!&quot;);
};

//接收服务器数据后的回调函数
ws.onmessage = function(evt) {
  console.log( &quot;Received Message: &quot; + evt.data);
  ws.close();
};

//向服务器发送信息
ws.send('your message');

//连接关闭后的回调函数
ws.onclose = function(evt) {
  console.log(&quot;Connection closed.&quot;);
};      
</code></pre></div><h3 id="http2"><a href="#http2" class="header-anchor">#</a> http2</h3> <p>就像前面说的http2其实很多功能跟SPDY很相似</p> <ul><li>多工</li></ul> <p>在http2，同一个TCP连接可以同时发起多个请求和回应，最重要的是我们知道1.1以前的版本都是按序返回，而2版本并不用按顺序返回，也就避免了队头堵塞</p> <p>在一个tcp连接里面同时发起多个请求，如果发现某个请求回应很堵塞，把处理好的部分继续发送，接着就发送其他请求，完成后再把堵塞的请求剩余的发送了，这样双向的实时的通信就叫做多工</p> <ul><li>二进制协议</li></ul> <p>http1.1数据体可以是文本也可以是二进制，头信息是文本。而http2则统一化了，统一用二进制，头信息和数据体都是二进制，统称为帧</p> <ul><li><p>数据流</p> <p><em>1.区分不同的包</em></p> <p>因为多工，http2不按顺序返回，而且同一个tcp连接有多条回应，那么怎么去区分是不同的包呢？<br>
http2提出了数据流的概念，每个请求或者回应的都是一个数据流，每个数据流都有一个特殊的编号ID，相当于一个tag，这样就可以区分不同的数据流了。</p> <p><em>2.设定优先级</em></p> <p>当然也可以指定数据流的优先级，优先级越高，服务器就越早回应。</p> <p><em>3.取消发送和回应</em></p> <p>在1.1以前都是通过关闭tcp连接来取消发送的，而数据流发送到中途，服务端和客户端都可以发送信号（RST_STREAM帧）来取消这一次的请求，而不用关闭TCP连接</p></li> <li><p>header压缩</p></li></ul> <p>http协议是不带状态的，每次请求都需要携带一些标识例如cookie等。
http2版本引入了头信息压缩机制。
客户端服务端还同时维护头信息，生成了索引号，相同域的请求就只发送索引了而不用再附加那些头信息了</p> <ul><li>服务器推送</li></ul> <p>http2允许服务器主动推送到客户端，但是通常都是静态资源的推送，比如这个html其实包含很多静态资源，通常都是客户端收到html再解析，再发出资源请求，而http2就可以直接主动把相关资源一起发送给客户端</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog.github.io/assets/js/app.dc1ffa30.js" defer></script><script src="/blog.github.io/assets/js/2.08fb6a77.js" defer></script><script src="/blog.github.io/assets/js/28.da0ec7e2.js" defer></script>
  </body>
</html>
