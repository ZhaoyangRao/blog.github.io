<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>null与undefined | RaoCy</title>
    <meta name="description" content="欢迎来到RaoCy博客">
    <link rel="icon" href="/blog.github.io/images/logo.png">
    
    <link rel="preload" href="/blog.github.io/assets/css/0.styles.59e117d8.css" as="style"><link rel="preload" href="/blog.github.io/assets/js/app.bba64067.js" as="script"><link rel="preload" href="/blog.github.io/assets/js/2.bc234928.js" as="script"><link rel="preload" href="/blog.github.io/assets/js/24.04204a0e.js" as="script"><link rel="prefetch" href="/blog.github.io/assets/js/10.cbc3757b.js"><link rel="prefetch" href="/blog.github.io/assets/js/11.461a49a9.js"><link rel="prefetch" href="/blog.github.io/assets/js/12.3385b74f.js"><link rel="prefetch" href="/blog.github.io/assets/js/13.51657757.js"><link rel="prefetch" href="/blog.github.io/assets/js/14.967341a4.js"><link rel="prefetch" href="/blog.github.io/assets/js/15.e94307c4.js"><link rel="prefetch" href="/blog.github.io/assets/js/16.d546238d.js"><link rel="prefetch" href="/blog.github.io/assets/js/17.5f06d85e.js"><link rel="prefetch" href="/blog.github.io/assets/js/18.fde54744.js"><link rel="prefetch" href="/blog.github.io/assets/js/19.f5a97b3c.js"><link rel="prefetch" href="/blog.github.io/assets/js/20.eb46622a.js"><link rel="prefetch" href="/blog.github.io/assets/js/21.e4fc2e78.js"><link rel="prefetch" href="/blog.github.io/assets/js/22.85db6c42.js"><link rel="prefetch" href="/blog.github.io/assets/js/23.91b626a7.js"><link rel="prefetch" href="/blog.github.io/assets/js/25.44235572.js"><link rel="prefetch" href="/blog.github.io/assets/js/26.936cd153.js"><link rel="prefetch" href="/blog.github.io/assets/js/27.220e5385.js"><link rel="prefetch" href="/blog.github.io/assets/js/28.6b654efd.js"><link rel="prefetch" href="/blog.github.io/assets/js/29.87fd0e12.js"><link rel="prefetch" href="/blog.github.io/assets/js/3.81a9b252.js"><link rel="prefetch" href="/blog.github.io/assets/js/30.0e27fea2.js"><link rel="prefetch" href="/blog.github.io/assets/js/4.11c97c33.js"><link rel="prefetch" href="/blog.github.io/assets/js/5.9be0316a.js"><link rel="prefetch" href="/blog.github.io/assets/js/6.0ab42dfa.js"><link rel="prefetch" href="/blog.github.io/assets/js/7.5cca9709.js"><link rel="prefetch" href="/blog.github.io/assets/js/8.71614664.js"><link rel="prefetch" href="/blog.github.io/assets/js/9.07c23159.js">
    <link rel="stylesheet" href="/blog.github.io/assets/css/0.styles.59e117d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog.github.io/" class="home-link router-link-active"><!----> <span class="site-name">RaoCy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器的世界" class="dropdown-title"><span class="title">浏览器的世界</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserKey/" class="nav-link">浏览器内核</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browser/" class="nav-link">浏览器多线程多进程</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserOpen/" class="nav-link">浏览器同域名请求并发限制</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserDns/" class="nav-link">浏览器DNS域名解析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端杂谈" class="dropdown-title"><span class="title">前端杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/modules/" class="nav-link">前端开发模式</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/utils/" class="nav-link">常用工具函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/edit/" class="nav-link">前端常用开发工具</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/jsnull/" class="nav-link">null与undefined</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/eventLoop/" class="nav-link">宏任务和微任务</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/callback/" class="nav-link">js异步编程方案</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iterable/" class="nav-link">iterator迭代器</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/closure/" class="nav-link">闭包</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/funcHigh/" class="nav-link">高阶函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/this/" class="nav-link">js中的this</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/class/" class="nav-link">js中的面向对象</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术杂玩" class="dropdown-title"><span class="title">前端技术杂玩</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/react/index/" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/api/" class="nav-link">mongodb</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/vuecli/index/" class="nav-link">vuecli</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mxgraph/index/" class="nav-link">mxgraph</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/prerender-spa-plugin/index/" class="nav-link">prerender-spa-plugin</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器的世界" class="dropdown-title"><span class="title">浏览器的世界</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserKey/" class="nav-link">浏览器内核</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browser/" class="nav-link">浏览器多线程多进程</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserOpen/" class="nav-link">浏览器同域名请求并发限制</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserDns/" class="nav-link">浏览器DNS域名解析</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端杂谈" class="dropdown-title"><span class="title">前端杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/modules/" class="nav-link">前端开发模式</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/utils/" class="nav-link">常用工具函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/edit/" class="nav-link">前端常用开发工具</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/jsnull/" class="nav-link">null与undefined</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/eventLoop/" class="nav-link">宏任务和微任务</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/callback/" class="nav-link">js异步编程方案</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iterable/" class="nav-link">iterator迭代器</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/closure/" class="nav-link">闭包</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/funcHigh/" class="nav-link">高阶函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/this/" class="nav-link">js中的this</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/class/" class="nav-link">js中的面向对象</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术杂玩" class="dropdown-title"><span class="title">前端技术杂玩</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/react/index/" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/api/" class="nav-link">mongodb</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/vuecli/index/" class="nav-link">vuecli</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mxgraph/index/" class="nav-link">mxgraph</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/prerender-spa-plugin/index/" class="nav-link">prerender-spa-plugin</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>null与undefined</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog.github.io/study/jsnull.html#null与undefined" class="sidebar-link">null与undefined</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog.github.io/study/jsnull.html#null" class="sidebar-link">null</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/study/jsnull.html#undefined" class="sidebar-link">undefined</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/study/jsnull.html#js中异同表现" class="sidebar-link">js中异同表现</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/study/jsnull.html#校验数据类型" class="sidebar-link">校验数据类型</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="null与undefined"><a href="#null与undefined" class="header-anchor">#</a> null与undefined</h2> <p>作为一个前端工程师，对js里面的null与undefined，很多人都会感到困惑，也有可能当时看了知道了，过段时间又忘了这两个的区别，主要还是它们在js里面的表现形式很相近，但其实js对他们的定义是大不一样的。<br></p> <div class="custom-block tip"><p class="custom-block-title">定义</p> <p>首先我们要明确的是Undefined 和 Null 是 Javascript 中两种特殊的原始数据类型,它们都只有一个值，分别对应 undefined 和 null</p></div> <h3 id="null"><a href="#null" class="header-anchor">#</a> null</h3> <p>null 表示一个值被定义了，定义为“空值”,被人为的重置为空对象。<br>
GC会择机回收该对象并释放内存。因此，如果需要释放某个对象，就将变量设置为null，即表示该对象已经被清空，目前无效状态</p> <h3 id="undefined"><a href="#undefined" class="header-anchor">#</a> undefined</h3> <p>undefined 的字面意思就是未定义，根本不存在定义<br>
例如：</p> <ul><li>变量被声明了，但没有赋值  var a;  console.log(a)//undefined</li> <li>调用函数时，应该提供的参数没有提供  function a(p){console.log(p)}  a()// undefined</li> <li>对象没有赋值的属性，该属性的值为undefined   var a={name:'123'}  console.log(a.sex)// undefined</li> <li>函数执行操作后没有返回值var x = function a(){}() alert(x)//undefined</li></ul> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>综上，所以设置一个值为 null 是合理的,如var a= null;值为null但已经可以用代码来处理了。<br>
但设置一个值为 undefined 是不合理，也没有意义的，本来 var a它此时就是undefined，你再var a=undefined毫无意义，而且在我们的代码里面undefined更多的时候指向一种错误</p></div> <h3 id="js中异同表现"><a href="#js中异同表现" class="header-anchor">#</a> js中异同表现</h3> <p>上面对基本概念有所理解，我们再看一看js里面对null和undefined的表现<br>
首先看一个判断题：null和undefined 是否相等</p> <div class="language- extra-class"><pre class="language-text"><code>console.log(null==undefined)//true
console.log(null===undefined)//false
</code></pre></div><p>再看</p> <div class="language- extra-class"><pre class="language-text"><code>alert(!undefined) //true
alert(!null) //true

</code></pre></div><p>null与undefined在js里面的行为非常相似，从上面的几个简单的例子里面我们肯定会困惑<br></p> <p>为什么双等下是true？<br></p> <p>全等我们能理解，本来两者又不属于同一种类型.双等是因为 ECMAScript 规范认为，既然 null 和  undefined 的行为很相似，并且都表示 一个无效的值，那么它们所表示的内容也具有相似性，所以知道了吧，是es规范这样搞事情的。<br></p> <p>为什么遇到“！”关键字符，null,undefined又被转换成了false?<br></p> <p>其实不只是“！”这个关键字符，包括遇到if语句，null,undefined都会被转换成false，在这里可以去把js的类型转换看一看，尤其特色的null,undefined,[ ],&quot;&quot;,{ },NaN的各种特殊转换</p> <h4 id="在number-parseint-parsefloat中的表现"><a href="#在number-parseint-parsefloat中的表现" class="header-anchor">#</a> 在Number parseInt parseFloat中的表现</h4> <div class="language- extra-class"><pre class="language-text"><code>Number(null) //0
Number(undefined) //NAN
这表明null能转为0 undefined转为的数字为NAN
parseInt(null) //NAN
parseInt(undefined) //NAN
parseFloat(null)//NAN
parseFloat(undefined)//NAN
</code></pre></div><p>为什么会出现这些结果？</p> <ul><li>parseInt()按字符解析，直到遇见第一个非数字字符为止。</li> <li>parseFloat()按字符解析，直到遇见一个无效的浮点数字字符为止。</li> <li>Number()能转换boolean值，null，只含整数或小数的字符串，空字符串，对象。</li></ul> <h4 id="typeof中的表现"><a href="#typeof中的表现" class="header-anchor">#</a> typeof中的表现</h4> <div class="language- extra-class"><pre class="language-text"><code>typeof(null) object   
typeof(undefined) undefined
</code></pre></div><p>参考《The history of “typeof null”》
第一版的JavaScript的数据类型在底层都是以二进制的形式，二进制的前三位为 0 会被 typeof 判断为对象类型，而 null 的二进制位恰好都是 0 ，因此，null 被误判断为 Object 类型。</p> <ol><li>整型（int）000</li> <li>引用类型（object）010</li> <li>双精度浮点型（double）100</li> <li>字符串（string）110</li> <li>布尔型（boolean）另外还用两个特殊值</li> <li>undefined，用整数−2^30（负2的30次方，不在整型的范围内）</li> <li>null，机器码空指针（C/C++ 宏定义），低三位也是000 <br>
typeof的源代码里面没有过滤null，导致在判断obj阶段产生了误会。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>JS_PUBLIC_API(JSType)
JS_TypeOfValue(JSContext *cx, jsval v)
{
    JSType type = JSTYPE_VOID;
    JSObject *obj;
    JSObjectOps *ops;
    JSClass *clasp;

    CHECK_REQUEST(cx);
    if (JSVAL_IS_VOID(v)) {  // (1)
        type = JSTYPE_VOID;
    } else if (JSVAL_IS_OBJECT(v)) {  // (2)
        obj = JSVAL_TO_OBJECT(v);
        if (obj &amp;&amp;
            (ops = obj-&gt;map-&gt;ops,
              ops == &amp;js_ObjectOps
              ? (clasp = OBJ_GET_CLASS(cx, obj),
                clasp-&gt;call || clasp == &amp;js_FunctionClass) // (3,4)
              : ops-&gt;call != 0)) {  // (3)
            type = JSTYPE_FUNCTION;
        } else {
            type = JSTYPE_OBJECT;
        }
    } else if (JSVAL_IS_NUMBER(v)) {
        type = JSTYPE_NUMBER;
    } else if (JSVAL_IS_STRING(v)) {
        type = JSTYPE_STRING;
    } else if (JSVAL_IS_BOOLEAN(v)) {
        type = JSTYPE_BOOLEAN;
    }
    return type;
}
</code></pre></div><p>所以typeof(null) 的结果为object，这是js里面的一个bug，曾经有提案 typeof null === 'null'.但提案被拒绝。</p> <h3 id="校验数据类型"><a href="#校验数据类型" class="header-anchor">#</a> 校验数据类型</h3> <p>前面我们提到 typeof(null) //object ,那么我们怎么获得我们想要的结果null呢，当然有，我们这里再简单的复习一下js校验数据类型的几个方式</p> <ol><li><h4 id="typeof"><a href="#typeof" class="header-anchor">#</a> typeof</h4></li></ol> <ul><li>typeof &quot;&quot;;  //string</li> <li>typeof 1;   //number</li> <li>typeof false; //boolean</li> <li>typeof undefined; //undefined</li> <li>typeof function(){}; //function</li> <li>typeof {}; //object</li> <li>typeof Symbol(); //symbol</li> <li>typeof null; //object---------------&gt;无效</li> <li>typeof []; //object---------------&gt;无效</li> <li>typeof new Date(); //object---------------&gt;无效</li> <li>typeof new RegExp(); //object   ---------------&gt;无效
<br>可以看到 typeof只能判断几种简单的数据类型</li></ul> <ol start="2"><li><h4 id="instanceof"><a href="#instanceof" class="header-anchor">#</a> instanceof</h4></li></ol> <ul><li>[] instanceof Array; <em>//true</em></li> <li>{} instanceof Object;<em>//true</em></li> <li>new Date() instanceof Date;<em>//true</em></li> <li>new RegExp() instanceof RegExp*//true*</li> <li>null instanceof Null--------------&gt;报错</li> <li>undefined instanceof undefined--------------&gt;报错</li></ul> <ol start="3"><li><h4 id="constructor"><a href="#constructor" class="header-anchor">#</a> constructor</h4></li></ol> <ul><li>alert(c.constructor === Array) ----------&gt; true</li> <li>alert(d.constructor === Date) -----------&gt; true</li> <li>alert(e.constructor === Function) -------&gt; true</li></ul> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>注意： null 和 undefined没有constructor <br>
如果自定义对象，开发者重写prototype之后，原有的constructor会丢失</p></div> <ol start="4"><li><h4 id="tostring-通用的方法"><a href="#tostring-通用的方法" class="header-anchor">#</a> toString 通用的方法</h4></li></ol> <ul><li>alert(Object.prototype.toString.call(a) === ‘[object String]’) -------&gt; true;</li> <li>alert(Object.prototype.toString.call(b) === ‘[object Number]’) -------&gt; true;</li> <li>alert(Object.prototype.toString.call(c) === ‘[object Array]’) -------&gt; true;</li> <li>alert(Object.prototype.toString.call(d) === ‘[object Date]’) -------&gt; true;</li> <li>alert(Object.prototype.toString.call(e) === ‘[object Function]’) -------&gt; true;</li> <li>alert(Object.prototype.toString.call(f) === ‘[object Function]’) -------&gt; true;
<br>该方法基本能满足js里面的类型校验了，就是代码有点多，不考虑其他函数库的情况下通用的方法</li></ul> <ol start="5"><li><h4 id="lodash-underscore-jquery都有现成的函数库"><a href="#lodash-underscore-jquery都有现成的函数库" class="header-anchor">#</a> lodash,underscore,jquery都有现成的函数库</h4></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog.github.io/assets/js/app.bba64067.js" defer></script><script src="/blog.github.io/assets/js/2.bc234928.js" defer></script><script src="/blog.github.io/assets/js/24.04204a0e.js" defer></script>
  </body>
</html>
