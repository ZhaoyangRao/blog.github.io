<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>this | RaoCy</title>
    <meta name="description" content="欢迎来到RaoCy博客">
    <link rel="icon" href="/blog.github.io/images/logo.png">
    
    <link rel="preload" href="/blog.github.io/assets/css/0.styles.59e117d8.css" as="style"><link rel="preload" href="/blog.github.io/assets/js/app.dc1ffa30.js" as="script"><link rel="preload" href="/blog.github.io/assets/js/2.08fb6a77.js" as="script"><link rel="preload" href="/blog.github.io/assets/js/33.1a5237f4.js" as="script"><link rel="prefetch" href="/blog.github.io/assets/js/10.d18d338d.js"><link rel="prefetch" href="/blog.github.io/assets/js/11.d50606ca.js"><link rel="prefetch" href="/blog.github.io/assets/js/12.2d5e909c.js"><link rel="prefetch" href="/blog.github.io/assets/js/13.c2786e32.js"><link rel="prefetch" href="/blog.github.io/assets/js/14.612e31b7.js"><link rel="prefetch" href="/blog.github.io/assets/js/15.1404e72c.js"><link rel="prefetch" href="/blog.github.io/assets/js/16.a43ef10a.js"><link rel="prefetch" href="/blog.github.io/assets/js/17.08b58e92.js"><link rel="prefetch" href="/blog.github.io/assets/js/18.3ba9d6c7.js"><link rel="prefetch" href="/blog.github.io/assets/js/19.fda9f2c7.js"><link rel="prefetch" href="/blog.github.io/assets/js/20.ad933aca.js"><link rel="prefetch" href="/blog.github.io/assets/js/21.a2a97297.js"><link rel="prefetch" href="/blog.github.io/assets/js/22.0ba40a2d.js"><link rel="prefetch" href="/blog.github.io/assets/js/23.a7ba6e9a.js"><link rel="prefetch" href="/blog.github.io/assets/js/24.22977506.js"><link rel="prefetch" href="/blog.github.io/assets/js/25.aa05b64e.js"><link rel="prefetch" href="/blog.github.io/assets/js/26.0cdf6387.js"><link rel="prefetch" href="/blog.github.io/assets/js/27.e3789d62.js"><link rel="prefetch" href="/blog.github.io/assets/js/28.da0ec7e2.js"><link rel="prefetch" href="/blog.github.io/assets/js/29.717e0ca2.js"><link rel="prefetch" href="/blog.github.io/assets/js/3.5045f36e.js"><link rel="prefetch" href="/blog.github.io/assets/js/30.5e7c3a60.js"><link rel="prefetch" href="/blog.github.io/assets/js/31.c8d23bf4.js"><link rel="prefetch" href="/blog.github.io/assets/js/32.f285ff61.js"><link rel="prefetch" href="/blog.github.io/assets/js/34.c81e4cdd.js"><link rel="prefetch" href="/blog.github.io/assets/js/35.87c86838.js"><link rel="prefetch" href="/blog.github.io/assets/js/36.7d5d299d.js"><link rel="prefetch" href="/blog.github.io/assets/js/37.5fb182ba.js"><link rel="prefetch" href="/blog.github.io/assets/js/38.035109da.js"><link rel="prefetch" href="/blog.github.io/assets/js/39.5de03b27.js"><link rel="prefetch" href="/blog.github.io/assets/js/4.0d132650.js"><link rel="prefetch" href="/blog.github.io/assets/js/5.3daba24f.js"><link rel="prefetch" href="/blog.github.io/assets/js/6.7f139b78.js"><link rel="prefetch" href="/blog.github.io/assets/js/7.a1080829.js"><link rel="prefetch" href="/blog.github.io/assets/js/8.3f1e94ff.js"><link rel="prefetch" href="/blog.github.io/assets/js/9.6691e078.js">
    <link rel="stylesheet" href="/blog.github.io/assets/css/0.styles.59e117d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog.github.io/" class="home-link router-link-active"><!----> <span class="site-name">RaoCy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器的世界" class="dropdown-title"><span class="title">浏览器的世界</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserKey/" class="nav-link">浏览器内核</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browser/" class="nav-link">浏览器多线程多进程</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserOpen/" class="nav-link">浏览器同域名请求并发限制</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserDns/" class="nav-link">浏览器DNS域名解析</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/broeweSafe/" class="nav-link">浏览器的安全</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserCache/" class="nav-link">浏览器的缓存</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/webworker/" class="nav-link">Web Worker</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iframe/" class="nav-link">iframe</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/http/" class="nav-link">http协议</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/cookie/" class="nav-link">cookie</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端杂谈" class="dropdown-title"><span class="title">前端杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/modules/" class="nav-link">前端开发模式</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/jsnull/" class="nav-link">null与undefined</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/eventLoop/" class="nav-link">宏任务和微任务</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/callback/" class="nav-link">js异步编程方案</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iterable/" class="nav-link">iterator迭代器</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/closure/" class="nav-link">闭包</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/funcHigh/" class="nav-link">高阶函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/this/" class="nav-link">js中的this</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/class/" class="nav-link">js中的面向对象</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/event/" class="nav-link">js里的事件模型</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/diff/" class="nav-link">diff算法</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/module/" class="nav-link">前端模块化规范</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术杂玩" class="dropdown-title"><span class="title">前端技术杂玩</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/react/index/" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/api/" class="nav-link">mongodb</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/vuecli/index/" class="nav-link">vuecli</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mxgraph/index/" class="nav-link">mxgraph</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/prerender-spa-plugin/index/" class="nav-link">prerender-spa-plugin</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器的世界" class="dropdown-title"><span class="title">浏览器的世界</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserKey/" class="nav-link">浏览器内核</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browser/" class="nav-link">浏览器多线程多进程</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserOpen/" class="nav-link">浏览器同域名请求并发限制</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserDns/" class="nav-link">浏览器DNS域名解析</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/broeweSafe/" class="nav-link">浏览器的安全</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/browserCache/" class="nav-link">浏览器的缓存</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/webworker/" class="nav-link">Web Worker</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iframe/" class="nav-link">iframe</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/http/" class="nav-link">http协议</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/cookie/" class="nav-link">cookie</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端杂谈" class="dropdown-title"><span class="title">前端杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/modules/" class="nav-link">前端开发模式</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/jsnull/" class="nav-link">null与undefined</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/eventLoop/" class="nav-link">宏任务和微任务</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/callback/" class="nav-link">js异步编程方案</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/iterable/" class="nav-link">iterator迭代器</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/closure/" class="nav-link">闭包</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/funcHigh/" class="nav-link">高阶函数</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/this/" class="nav-link">js中的this</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/class/" class="nav-link">js中的面向对象</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/event/" class="nav-link">js里的事件模型</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/diff/" class="nav-link">diff算法</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/study/module/" class="nav-link">前端模块化规范</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端技术杂玩" class="dropdown-title"><span class="title">前端技术杂玩</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog.github.io/react/index/" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mongodb/api/" class="nav-link">mongodb</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/vuecli/index/" class="nav-link">vuecli</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/mxgraph/index/" class="nav-link">mxgraph</a></li><li class="dropdown-item"><!----> <a href="/blog.github.io/prerender-spa-plugin/index/" class="nav-link">prerender-spa-plugin</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>this</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog.github.io/study/this.html#this" class="sidebar-link">this</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.github.io/study/this.html#改变this指向" class="sidebar-link">改变this指向</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog.github.io/study/this.html#new关键字" class="sidebar-link">new关键字</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/study/this.html#call-apply" class="sidebar-link">call apply</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/study/this.html#bind" class="sidebar-link">bind</a></li><li class="sidebar-sub-header"><a href="/blog.github.io/study/this.html#箭头函数" class="sidebar-link">箭头函数</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="this"><a href="#this" class="header-anchor">#</a> this</h2> <p>网上我也看了很多关于this的解读或者例子，这里做一个自己总结的记录吧</p> <div class="custom-block tip"><p class="custom-block-title">this</p> <p>this其实简单的说就是函数运行时所在的环境对象，在哪里运行或者说谁在调用它，this就指向谁，记住这个就够了。</p> <p>所谓函数引用、对象引用、函数名其实都是内存中的一个地址，这个地址指向了某个函数或对象或方法，谁拿到了这个地址，谁就拥有了调用函数、调用方法的权利，此时this就指向调用者。</p> <p>所以函数没有被调用，就没有this，只有在执行的时候你才能知道到底谁在调用函数。</p> <p>值得注意的是在严格版中的默认的this不再是window，而是undefined，下面的例子都不是严格模式。</p></div> <p>先来几个例子来缕一缕上面的几句话</p> <div class="language- extra-class"><pre class="language-text"><code>例1
function a(){
    var user = &quot;追梦子&quot;;
    console.log(this.user); //undefined
    console.log(this); //Window
}
a();   

此时this指向得是window，a()其实是window.a()，所以很显然其实是window在调用它
————————————————————————————————————————————————
例2
var o = {
    user:&quot;追梦子&quot;,
    fn:function(){
        console.log(this.user);  //追梦子
    }
}
o.fn();

此时this指向o, o在调用fn()，有人就会想了 o.fn() 其实不就是window.o.fn()吗?为什么没有指向window了

所以this其实只跟谁调用该函数，通常指向的是上一级,跟js的老传统作用域链有关系，虽然最外面是window，但是其实上一级，或者说它的直接调用者是o，所以依然指向o
——————————————————————————————————————————————————
例3
var o = {
    a:10,
    b:{
        a:12,
        fn:function(){
            console.log(this.a); //12
        }
    }
}
o.b.fn();

根据例子2的结论，你能很快判断出此时this指向b 
————————————————————————————————————————————————————
例4
var o = {
    a:10,
    b:{
        a:12,
        fn:function(){
            console.log(this.a); //undefined
        }
    }
}
var c=o.b.fn;
c()
这里可能有人又会迷惑了，这里的this指向了window，为什么不是b？
牢记this永远指向调用它的对象，c函数是被window调用的毫无疑问，在这里特殊的是虽然fn是在被b引用，但它此时并没有执行。
fn被赋值给了c，最终执行并调用c的依然是window
————————————————————————————————————————————————————


</code></pre></div><h2 id="改变this指向"><a href="#改变this指向" class="header-anchor">#</a> 改变this指向</h2> <h3 id="new关键字"><a href="#new关键字" class="header-anchor">#</a> new关键字</h3> <div class="language- extra-class"><pre class="language-text"><code>构造函数调用模式下，this指向被构造的对象
例5
function Fn(){
    this.user = &quot;1&quot;;
}
var a = new Fn();
console.log(a.user); //1

按照我们前面几个例子的理解，我们也要看Fn是被谁调用的是吧! 这里是看起来被new给调用了啊，难道this指向new，new是什么玩意???

</code></pre></div><p>我们先要搞清楚new这个特殊的关键字做了什么？</p> <ul><li>创建了一个空对象</li> <li>复制了原型</li> <li>this指向改变，指向刚刚创建的新对象</li> <li>返回新的对象实例<br></li></ul> <p>下面就是一个具体代码化的new的例子</p> <div class="language- extra-class"><pre class="language-text"><code>function Fn(){
    this.user = &quot;1&quot;;
}
var a = new Fn();
——————————————————————————
这里的 var a= new Fn();
其实在这期间做了很多事情

var obj={};  //创建了一个空对象

obj._proto_=Fn.prototype; //复制了原型

Fn.call(obj,'a'); //this指向改变,指向自己

return obj  //返回对象
</code></pre></div><h3 id="call-apply"><a href="#call-apply" class="header-anchor">#</a> call apply</h3> <p>上面讲new的时候我们其实举例的时候也是举内部有个call去改变了this指向，所以new的改变指向其实本质上也跟call或者apply有关。<br></p> <p>这是两个可以切换函数运行的上下文环境的方法，直白的说就是可以改变this指向，你想让函数指向谁，就指向谁。<br></p> <p>使用方法：</p> <ul><li>callback
<ul><li>第一个参数，是你想指向的函数</li> <li>第二个参数差别就不一样了，call是直接放进去的用‘,’分割，apply是数组，所以我一般还是用apply较多</li></ul></li></ul> <div class="language- extra-class"><pre class="language-text"><code>function a(a,b){
    return a+b
}

var a1=a.call(a,1,2)   

console.log(a1)   // 3 
——————————————————————
var b1=a.apply(a,[1,2])

conosle.log(b1)   //3
</code></pre></div><h3 id="bind"><a href="#bind" class="header-anchor">#</a> bind</h3> <p>bind同样的也能改变this指向</p> <div class="language- extra-class"><pre class="language-text"><code>function a(a,b){
    return a+b
}

var a1=a.bind(a,1,2)()   

console.log(a1)   // 3 

</code></pre></div><p>从上面的例子看bind更像call，传参跟call一致</p> <ul><li>callback
<ul><li>第一个参数，是你想指向的函数</li> <li>第二个参数用‘,’分割，与call一致</li></ul></li></ul> <p>但是它多了一个(),执行符号
由此可知，bind返回的是一个新的函数，需要调用它才能执行</p> <h3 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h3> <p>箭头函数是es6新增的一种函数<br></p> <p>箭头函数除了写法的区别外，最大的区别是关于this，其他函数都是谁调用它指向谁，而箭头函数并不遵循这个规则，更像是按照作用域链去继承上一级的this。<br></p> <div class="language- extra-class"><pre class="language-text"><code> 例子：
    var x=2;
    
    var fn = (()=&gt;{
        console.log(this.x)
    })
    
    fn();//2  
——————————————————————————————
例子：
    var fn = (()=&gt;{
        console.log(this.x)
    })  
    var x=&quot;2&quot;
    var obj={
        x:&quot;1&quot;,
        fn:fn
    }
    obj.fn();//2
    
这里虽然是obj调用的fn，但是因为fn是箭头函数，它就去找继承上一级的this，也就是全局windows了
</code></pre></div><p>值得注意的是
使用了箭头函数，你再去bind,apply,call，就会发现失去了作用，第一个参数直接被忽略了，因为箭头函数已经继承了this了，你可以理解为箭头函数的优先级更加高。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog.github.io/assets/js/app.dc1ffa30.js" defer></script><script src="/blog.github.io/assets/js/2.08fb6a77.js" defer></script><script src="/blog.github.io/assets/js/33.1a5237f4.js" defer></script>
  </body>
</html>
